<!DOCTYPE html>
<html>
<head>
    <title>Email Form</title>
    <meta charset='utf-8'>
  <meta name='viewport' content='width=device-width, initial-scale=1, shrink-to-fit=no'>
  <!-- Boxicons CSS -->
  <link href='https://unpkg.com/boxicons@2.1.2/css/boxicons.min.css' rel='stylesheet'>
  <link rel="stylesheet" href="static/css/userdash-style.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css" integrity="sha512-z3gLpd7yknf1YoNbCzqRKc4qyor8gaKU1qmn+CShxbuBusANI9QpRohGBreCFkKxLhei6S9CQXFEbbKuqLg0DA==" crossorigin="anonymous" referrerpolicy="no-referrer" />
  
</head>
<body>
   
   <nav class='sidebar close'>
      <header>
        <div class='image-text'>
          <span class='image'>
            <img src="https://cdn.iconscout.com/icon/premium/png-256-thumb/voice-mail-1-538663.png" alt="VMail" />
          </span>
         
        </div>
  
        <i class='bx bx-chevron-right toggle'></i>
  
      </header>
      <div class='menu-bar'>
         <div class='menu'>
           <li class='search-box'>
             <a href="#">
               <i class='bx bx-search icon'></i>
               <input type="search" placeholder="Search" />
             </a>
           </li>
           <ul class='menu-links'>
             <li class='nav-link'>
               <a href="#">
                 <i class='bx bx-home-alt icon'></i>
                 <span class='text nav-text'>Dashboard</span>
               </a>
             </li>
             <li class='nav-link'>
               <a href="#">
                  <i class='bx bx-star icon' ></i>
                 <span class='text nav-text'>Starred</span>
               </a>
             </li>
             <li class='nav-link'>
                  <a href="{{ url_for('SendMail') }}">
                     <i class='bx bx-send icon'></i>
                 <span class='text nav-text'>Sent Mails</span>
               </a>
             </li>
             <li class='nav-link'>
               <a href="{{ url_for('RecievedMail') }}">
                  <i class='bx bx-envelope icon' ></i>
              <span class='text nav-text'>Recieved Mails</span>
            </a>
          </li>
          <li class='nav-link'>
            <a href="#">
               <i class="fa fa-exclamation-triangle icon" aria-hidden="true"></i>
              <span class='text nav-text'>Spam</span>
            </a>
          </li>
          <li class='nav-link'>
            <a href="#">
               <i class='bx bx-trash-alt icon'></i>
              <span class='text nav-text'>Recycle Bin</span>
            </a>
          </li>  
           </ul>
         </div>
   
         <div class='bottom-content'>
           <li class='nav-link'>
             <a href="#">
               <i class='bx bx-log-out icon'></i>
               <span class='text nav-text'>Logout</span>
             </a>
           </li>
           <li class='mode'>
             <div class='moon-sun'>
               <a href="#" >
                 <i class='bx bx-sun icon sun'></i>
                 <i class='bx bx-moon icon moon'></i>
               </a>
             </div>
             <span class='mode-text text'>Dark Mode</span>
             <div class='toggle-switch'>
               <span class='switch'></span>
             </div>
           </li>
         </div>
       </div>
     </nav>
     
     <section class="home">
         <div class="text">
             <h1>User Dashboard</h1>
         </div>
         <div class="text">
          <div class="button-container">
            <button onclick="runSpeechRecog('subject')">Speech for Subject</button>
            <button onclick="runSpeechRecog('message')">Speech for Message</button>
        </div>
        <div class="modal-container">
          <div class="modal-content">
              <form name="emailForm" action="{{ url_for('email') }}" method="post" enctype="multipart/form-data">
                <div class="form-item">
                  <p class="formLabel" for="reciever">To:</p>
                  <input type="text" name="reciever" id="reciever" class="form-style" required />
              </div>
              <div class="form-item">
                <p class="formLabel" for="subject">Subject:</p>
                <input type="text" name="subject" id="subject" class="form-style" required />
            </div>
            <div class="form-item">
              <p class="formLabel" for="message">Message:</p>
              <textarea  name="message" id="message" rows="4" class="form-style" required ></textarea>
          </div>
          <div class="form-item">
            <p class="formLabel" for="image">Upload Image:</p>
            <input type="file" name="image" id="image" class="form-style" accept="image/*" required />
        </div>
        <div class="form-item">
        <button type="submit" class="send">Send</button>
      </div>
    
              </form>
          </div>
      </div>
        <h3 id="output" class="hide"></h3>
       </div>
      </div>
     </section>
   <script>
     var currentSubject = "";
  var currentMessage = "";

  runSpeechRecog = (field) => {
      document.getElementById("output").innerHTML = "Listening...";
      var output = document.getElementById('output');
      var textInput = document.getElementById(field);
      let recognition = new webkitSpeechRecognition();
      recognition.onstart = () => {
          output.innerHTML = "Listening...";
      }
      recognition.onresult = (e) => {
          var transcript = e.results[0][0].transcript;
          output.innerHTML = transcript;
          if (field === 'subject') {
              currentSubject = transcript;
              textInput.value = currentSubject;
          } else if (field === 'message') {
              currentMessage = transcript;
              textInput.value = currentMessage;
          }
      }
      recognition.start();
  }
    
</script>
      <!-- Script -->
<script src="{{ url_for('static', filename='userdash-script.js') }}"></script>  

</body>
</html>
